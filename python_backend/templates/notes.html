<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HoloNote</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    /* (Your scrollbar and layout CSS here; see your previous code) */
    ::-webkit-scrollbar { width: 6px; background-color: transparent; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb {
      background-color: #92a4e0;
      border-radius: 6px;
      border: 1px solid transparent;
    }
    ::-webkit-scrollbar-thumb:hover { background-color: #8ca4f2; cursor: pointer; }
    ::-webkit-scrollbar-button { display: none; width: 0; height: 0; }
    html { scrollbar-width: thin; scrollbar-color: #92a4e0 transparent; }
    html, body { height: 100%; margin: 0; padding: 0; box-sizing: border-box; }
    body {
      display: flex; flex-direction: column;
      background: linear-gradient(45deg, #8ca4f2ba, #e4e7dfba);
    }
    .navbar { flex: 0 0 auto; z-index: 999; padding: 1rem 2rem; }
    .main-container {
      flex: 1 1 0; min-height: 0;
      display: flex; justify-content: center; align-items: flex-start;
      overflow: hidden; padding: 1rem 2rem 2rem 2rem; box-sizing: border-box;
    }
    .glass {
      background: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(5px); border-radius: 10px;
    }
    .side-panel {
      width: 20%; min-width: 10rem; height: 100%; overflow-y: auto;
      margin-right: 2rem; padding: 1rem; box-sizing: border-box;
    }
    .content-panel {
      width: 65%; min-width: 40rem; height: 100%; overflow-y: auto;
      padding: 1rem; box-sizing: border-box;
    }
    .notes-title { margin-bottom: 1rem; font-weight: 600; }
    .notes-container { padding: 0; margin: 0; }
    .note-link {
      display: block; margin: 0.25rem 0; text-decoration: none;
      color: #2b3861; background: transparent; border: none;
      padding: 0.5rem 0;
    }
    .note-link:hover {
      text-decoration: none; color: #2b3861; background-color: transparent; cursor: pointer;
    }
    .navbar-brand {
      font-size: 1.7rem; font-weight: 500; padding: 0;
      color: #2b3861; text-decoration: none;
    }
  </style>
</head>
<body>
  <!-- HEADER / NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">HoloNote</a>
    </div>
  </nav>

  <!-- MAIN CONTENT AREA -->
  <div class="main-container">
    <!-- SIDE PANEL -->
    <nav class="glass side-panel">
      <h4 class="notes-title">Notes</h4>
      <div class="notes-container" id="notesContainer">
        <!-- These will be populated by JavaScript -->
      </div>
    </nav>

    <!-- MAIN CONTENT PANEL -->
    <main class="glass content-panel">
      <h2>Note Content</h2>
      <div id="noteContent">
        <!-- If a note was selected, show its content -->
        {% if note_content %}
          {{ note_content|safe }}
        {% else %}
          <p>Select a note from the left to view its content.</p>
        {% endif %}
      </div>
    </main>
  </div>

  <!-- JavaScript to load note list and build links -->
  <script>
    // On page load, fetch the list of online markdown names
    fetch('/getOnlineMarkdown')
      .then(response => response.json())
      .then(data => {
        const container = document.getElementById("notesContainer");
        // data is an array of note names, e.g., ["Cover", "Page 6", "Page 7", ...]
        data.forEach(noteName => {
          // Create a URL-friendly version: replace spaces with underscores
          const noteUrl = "/notes/" + noteName.replace(/ /g, "_");
          const a = document.createElement("a");
          a.href = noteUrl;
          a.className = "note-link";
          a.textContent = noteName;
          container.appendChild(a);
        });
      })
      .catch(error => console.error("Error fetching note list:", error));
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
